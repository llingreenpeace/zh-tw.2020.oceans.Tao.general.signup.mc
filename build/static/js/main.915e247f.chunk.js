(this["webpackJsonpgpea-en-54672-zhtw.2020.oceans.Tao"]=this["webpackJsonpgpea-en-54672-zhtw.2020.oceans.Tao"]||[]).push([[0],[function(e,n,t){e.exports=t(4)},function(e,n,t){},function(e,n,t){},function(e,n,t){var o,i={domainThreshold:2,secondLevelThreshold:2,topLevelThreshold:2,defaultDomains:["msn.com","bellsouth.net","telus.net","comcast.net","optusnet.com.au","earthlink.net","qq.com","sky.com","icloud.com","mac.com","sympatico.ca","googlemail.com","att.net","xtra.co.nz","web.de","cox.net","gmail.com","ymail.com","aim.com","rogers.com","verizon.net","rocketmail.com","google.com","optonline.net","sbcglobal.net","aol.com","me.com","btinternet.com","charter.net","shaw.ca"],defaultSecondLevelDomains:["yahoo","hotmail","mail","live","outlook","gmx"],defaultTopLevelDomains:["com","com.au","com.tw","ca","co.nz","co.uk","de","fr","it","ru","net","org","edu","gov","jp","nl","kr","se","eu","ie","co.il","us","at","be","dk","hk","es","gr","ch","no","cz","in","net","net.au","info","biz","mil","co.jp","sg","hu"],run:function(e){e.domains=e.domains||i.defaultDomains,e.secondLevelDomains=e.secondLevelDomains||i.defaultSecondLevelDomains,e.topLevelDomains=e.topLevelDomains||i.defaultTopLevelDomains,e.distanceFunction=e.distanceFunction||i.sift3Distance;var n=function(e){return e},t=e.suggested||n,o=e.empty||n,a=i.suggest(i.encodeEmail(e.email),e.domains,e.secondLevelDomains,e.topLevelDomains,e.distanceFunction);return a?t(a):o()},suggest:function(e,n,t,o,i){e=e.toLowerCase();var a=this.splitEmail(e);if(t&&o&&-1!==t.indexOf(a.secondLevelDomain)&&-1!==o.indexOf(a.topLevelDomain))return!1;if(c=this.findClosestDomain(a.domain,n,i,this.domainThreshold))return c!=a.domain&&{address:a.address,domain:c,full:a.address+"@"+c};var r=this.findClosestDomain(a.secondLevelDomain,t,i,this.secondLevelThreshold),l=this.findClosestDomain(a.topLevelDomain,o,i,this.topLevelThreshold);if(a.domain){var c=a.domain,s=!1;if(r&&r!=a.secondLevelDomain&&(c=c.replace(a.secondLevelDomain,r),s=!0),l&&l!=a.topLevelDomain&&(c=c.replace(a.topLevelDomain,l),s=!0),1==s)return{address:a.address,domain:c,full:a.address+"@"+c}}return!1},findClosestDomain:function(e,n,t,o){var i;o=o||this.topLevelThreshold;var a=99,r=null;if(!e||!n)return!1;t||(t=this.sift3Distance);for(var l=0;l<n.length;l++){if(e===n[l])return e;(i=t(e,n[l]))<a&&(a=i,r=n[l])}return a<=o&&null!==r&&r},sift3Distance:function(e,n){if(null==e||0===e.length)return null==n||0===n.length?0:n.length;if(null==n||0===n.length)return e.length;for(var t=0,o=0,i=0,a=0;t+o<e.length&&t+i<n.length;){if(e.charAt(t+o)==n.charAt(t+i))a++;else{o=0,i=0;for(var r=0;r<5;r++){if(t+r<e.length&&e.charAt(t+r)==n.charAt(t)){o=r;break}if(t+r<n.length&&e.charAt(t)==n.charAt(t+r)){i=r;break}}}t++}return(e.length+n.length)/2-a},splitEmail:function(e){var n=e.trim().split("@");if(n.length<2)return!1;for(var t=0;t<n.length;t++)if(""===n[t])return!1;var o=n.pop(),i=o.split("."),a="",r="";if(0==i.length)return!1;if(1==i.length)r=i[0];else{a=i[0];for(t=1;t<i.length;t++)r+=i[t]+".";r=r.substring(0,r.length-1)}return{topLevelDomain:r,secondLevelDomain:a,domain:o,address:n.join("@")}},encodeEmail:function(e){var n=encodeURI(e);return n=n.replace("%20"," ").replace("%25","%").replace("%5E","^").replace("%60","`").replace("%7B","{").replace("%7C","|").replace("%7D","}")}};e.exports&&(e.exports=i),void 0===(o=function(){return i}.apply(n,[]))||(e.exports=o),"undefined"!==typeof window&&window.jQuery&&(jQuery.fn.mailcheck=function(e){var n=this;if(e.suggested){var t=e.suggested;e.suggested=function(e){t(n,e)}}if(e.empty){var o=e.empty;e.empty=function(){o.call(null,n)}}e.email=this.val(),i.run(e)})},function(e,n,t){"use strict";t.r(n);t(1),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(2);var o=window.$;o.validator.messages.required="\u5fc5\u586b\u6b04\u4f4d",o.validator.addMethod("validate-name",(function(e,n){return new RegExp(/^[\u4e00-\u9fa5_a-zA-Z_ ]{1,40}$/i).test(e)}),"\u59d3\u6c0f\u683c\u5f0f\u4e0d\u6b63\u78ba\uff0c\u8acb\u4e0d\u8981\u8f38\u5165\u6578\u5b57\u6216\u7b26\u865f"),o.validator.addMethod("email",(function(e,n){return!e||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/i.test(e)}),"Email \u683c\u5f0f\u932f\u8aa4"),o.validator.addMethod("taiwan-phone",(function(e,n){var t=new RegExp(/^(0|886|\+886)?(9\d{8})$/).test(e),o=new RegExp(/^(0|886|\+886){1}[2-8]-?\d{6,8}$/).test(e);return!e||(t||o)}),"\u96fb\u8a71\u683c\u5f0f\u4e0d\u6b63\u78ba\uff0c\u8acb\u53ea\u8f38\u5165\u6578\u5b57 0912345678 \u548c 02-23612351"),o.validator.addClassRules({email:{email:!0},"taiwan-phone":{"taiwan-phone":!0}});var i=function(e){("string"===typeof e||e instanceof String)&&(e=document.querySelector(e));var n={};return e.querySelectorAll("input").forEach((function(e,t){var o=null;o="checkbox"===e.type?e.checked:e.value,n[e.name]=o})),e.querySelectorAll("select").forEach((function(e,t){n[e.name]=e.options[e.selectedIndex].value})),n},a=function(){document.querySelector("#page-loading").classList.add("hide"),setTimeout((function(){document.querySelector("#page-loading").remove()}),1100)};!function(){if(window.location.href.indexOf("utm_source=dd")>=0){var e=document.createElement("style");e.innerHTML=".is-hidden-at-dd-page-only {\n\t\t\t\tdisplay: none !important;\n\t\t\t}\n\t\t\t.is-shown-at-dd-page-only {\n\t\t\t\tdisplay: block !important;\n\t\t\t}",document.head.appendChild(e)}else{var n=document.createElement("style");n.innerHTML="\n\t\t\t.is-shown-at-dd-page-only {\n\t\t\t\tdisplay: none !important;\n\t\t\t}",document.head.appendChild(n)}}();var r=window,l=r.$,c=(r.history,r.AOS),s=l(".typing__input").val(),u=0,d=100,m=null,p=function e(){var n=s.substr(0,u),t=n.substr(n.length-1);d="\uff0c"==t||"\uff1f"==t||"\u3002"==t?500:100,l(".typing__output").html(n),++u===s.length+1?clearInterval(m):m=setTimeout(e,d)};l(document).ready((function(){c.init({easing:"ease-out-back",duration:1e3}),l(".typing__output").html("");document.body.clientWidth>800?(l("#fullpage").fullpage({verticalCentered:!1,scrollBar:!0,navigation:!1,afterRender:function(){}}),!0,l("#page-1").is(":visible")?m=setTimeout(p,d):l(".typing__output").html(s)):l(".typing__output").html(s),l(".floating-signup-div").click((function(){l("html, body").animate({scrollTop:l(".main-form-container").offset().top},"slow"),l("#email").focus()})),l(".downward-div").click((function(){l.fn.fullpage.moveSectionDown()}))})),l((function(){setInterval((function(){l(".before-after img").toggleClass("active")}),1e3)})),l((function(){for(var e=(new Date).getFullYear(),n=e;n>e-100;n--)l(".en__field__input--select").append(l("<option>",{value:n.toString()+"-01-01",text:n}));l("#email").focus((function(){l(".slide-down-panel").slideDown(400)})),l(".en__submit").click((function(){l(".slide-down-panel").slideDown(400)})),l(".cta__btn").click((function(){l(".slide-down-panel").slideDown(400),l("html, body").animate({scrollTop:l("#email").offset().top},"slow"),l("#email").focus()})),l("form.en__component").validate({errorPlacement:function(e,n){console.log(e),n.after(e)},submitHandler:function(e){document.querySelector("#page-loading")||document.querySelector("body").insertAdjacentHTML("beforeend",'\n\t\t\t<div id="page-loading" class="hide">\n\t\t\t  <div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>\n\t\t\t</div>'),setTimeout((function(){document.querySelector("#page-loading").classList.remove("hide")}),0);try{var n=i("#mc-form"),t=i(e),o=Object.assign(n,t);o.MobilePhone&&(o.MobilePhone=o.MobilePhone.replace(/^0{1}/,"")),fetch(document.querySelector("#mc-form").action,{method:"POST",body:Object.keys(o).reduce((function(e,n){return e.append(n,o[n]),e}),new FormData)}).then((function(e){return e.json()})).then((function(e){var n,t;a(),h(2),e.Supporter&&(n="2020-ocean_sanctuaries_tao",window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"gaEvent",eventCategory:"petitions",eventAction:"signup",eventLabel:n,eventValue:t}),window.dataLayer.push({event:"fbqEvent",contentName:n,contentCategory:"Petition Signup"}))})).catch((function(e){a(),console.error(e)}))}catch(r){console.error(r)}return!1},invalidHandler:function(e,n){var t=n.numberOfInvalids();t&&console.log(t)}});var o=["me.com","outlook.com","netvigator.com","cloud.com","live.hk","msn.com","gmail.com","hotmail.com","ymail.com","yahoo.com","yahoo.com.tw","yahoo.com.hk"],r=["com","net","org"],c=t(3);l("#email").on("blur",(function(){var e=this;c.run({email:l("#email").val(),domains:o,topLevelDomains:r,suggested:function(e){l("#emailSuggestion")[0].innerHTML=e.full,l(".email-suggestion").show()},empty:function(){e.emailSuggestion=null}})})),l(".email-suggestion").click((function(){l("#email").val(l("#emailSuggestion")[0].innerHTML),l(".email-suggestion").hide()})),f()})),l((function(){var e=document.querySelector(".en-share-block"),n=e.getAttribute("data-url"),t=e.getAttribute("data-text");n||console.log("Cannot find the url. Exit share_block");var o=e.querySelector(".main-share-button"),i={};if(i.fb="https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(n)+"&t="+encodeURIComponent(t),i.line="https://line.naver.jp/R/msg/text/?"+encodeURIComponent(t)+"%0D%0A"+encodeURIComponent(n),navigator.share){function a(e){navigator.share({text:t,url:n})}o.addEventListener("click",a),o.addEventListener("touchstart",a)}else o.href=i.fb;for(var r in i){var l=e.querySelector("."+r);l&&(l.href=i[r])}})),l((function(){var e=function(){var e=document.querySelector('input[name="numSignupTarget"]')?parseInt(document.querySelector('input[name="numSignupTarget"]').value,10):5e4,n=document.querySelector('input[name="numResponses"]')?parseInt(document.querySelector('input[name="numResponses"]').value,10):29612;return n<29612&&(n+=29612),(isNaN(e)||e<5e4)&&(e=5e4),n>e&&(e=1e4*Math.ceil(n/1e4)),{numSignupTarget:e,numSignup:n}}(),n=e.numSignupTarget,t=e.numSignup;l(".signup-target").text(n.toLocaleString()),l(".signup-current").text(t.toLocaleString());var o=l(".signup-current");o.prop("Counter",0).animate({Counter:t},{duration:1200,easing:"swing",step:function(e){o.text(Math.ceil(e).toLocaleString())}}),l(".meter > span").each((function(){l(this).data("origWidth",l(this).width()).width(0).animate({width:Math.ceil(t/n*100)+"%"},1200)}))}));var h=function(e){if(1===e)l("#page-2").hide();else{if(2!=e)throw new Error("Unknow pageNo: "+e);if(l("#page-1").hide(),l("#page-2").show(),l(window).width()<=800)document.querySelector("#page-2").getBoundingClientRect().top,window.pageYOffset;document.querySelector(".floating-signup-div").remove()}},f=function(){var e=window.location.search;"dd"===new URLSearchParams(e).get("utm_source")&&(l(".is-hidden-at-dd-page-only").hide(),l("#en__field_supporter_phoneNumber").removeAttr("required"))};l((function(){h(1)})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[0,1]]]);
//# sourceMappingURL=main.915e247f.chunk.js.map
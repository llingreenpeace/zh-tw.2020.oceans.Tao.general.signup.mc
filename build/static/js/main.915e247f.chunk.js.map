{"version":3,"sources":["../node_modules/mailcheck/src/mailcheck.js","serviceWorker.js","App/jquery.mc.form-helper.js","App/main.js"],"names":["Mailcheck","domainThreshold","secondLevelThreshold","topLevelThreshold","defaultDomains","defaultSecondLevelDomains","defaultTopLevelDomains","run","opts","domains","secondLevelDomains","topLevelDomains","distanceFunction","sift3Distance","defaultCallback","result","suggestedCallback","suggested","emptyCallback","empty","suggest","encodeEmail","email","toLowerCase","emailParts","this","splitEmail","indexOf","secondLevelDomain","topLevelDomain","closestDomain","findClosestDomain","domain","address","full","closestSecondLevelDomain","closestTopLevelDomain","rtrn","replace","threshold","dist","minDist","i","length","s1","s2","c","offset1","offset2","lcs","charAt","parts","trim","split","pop","domainParts","sld","tld","substring","join","encodeURI","module","exports","window","jQuery","fn","mailcheck","self","oldSuggested","oldEmpty","call","val","Boolean","location","hostname","match","$","validator","messages","required","addMethod","value","element","RegExp","test","phoneReg6","phoneReg7","addClassRules","fetchFormInputs","form","String","document","querySelector","obj","querySelectorAll","forEach","el","idx","v","type","checked","name","options","selectedIndex","hideFullPageLoading","classList","add","setTimeout","remove","href","style","createElement","innerHTML","head","appendChild","AOS","history","input","counter","freq","timer","typing","current_input","substr","last","html","clearInterval","ready","init","easing","duration","body","clientWidth","fullpage","verticalCentered","scrollBar","navigation","afterRender","is","click","animate","scrollTop","offset","top","focus","moveSectionDown","setInterval","toggleClass","nowYear","Date","getFullYear","append","toString","text","slideDown","validate","errorPlacement","error","console","log","after","submitHandler","insertAdjacentHTML","defaults","userInputs","postData","Object","assign","MobilePhone","fetch","action","method","keys","reduce","formData","k","FormData","then","response","json","eventLabel","eventValue","changeToPage","Supporter","dataLayer","push","catch","e","invalidHandler","event","errors","numberOfInvalids","require","on","suggestion","show","emailSuggestion","hide","hideDdBtn","url","getAttribute","mainButton","shareUrls","fb","encodeURIComponent","line","navigator","share","handleClickMainShare","addEventListener","theBtn","numSignupTarget","parseInt","numResponses","isNaN","Math","ceil","numSignup","getNumSignupsAndTarget","toLocaleString","$signupCurrEl","prop","Counter","step","now","each","data","width","pageNo","Error","getBoundingClientRect","pageYOffset","queryString","search","URLSearchParams","get","removeAttr","serviceWorker","registration","unregister"],"mappings":"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","file":"static/js/main.915e247f.chunk.js","sourcesContent":["/*\n * Mailcheck https://github.com/mailcheck/mailcheck\n * Author\n * Derrick Ko (@derrickko)\n *\n * Released under the MIT License.\n *\n * v 1.1.1\n */\n\nvar Mailcheck = {\n  domainThreshold: 2,\n  secondLevelThreshold: 2,\n  topLevelThreshold: 2,\n\n  defaultDomains: ['msn.com', 'bellsouth.net',\n    'telus.net', 'comcast.net', 'optusnet.com.au',\n    'earthlink.net', 'qq.com', 'sky.com', 'icloud.com',\n    'mac.com', 'sympatico.ca', 'googlemail.com',\n    'att.net', 'xtra.co.nz', 'web.de',\n    'cox.net', 'gmail.com', 'ymail.com',\n    'aim.com', 'rogers.com', 'verizon.net',\n    'rocketmail.com', 'google.com', 'optonline.net',\n    'sbcglobal.net', 'aol.com', 'me.com', 'btinternet.com',\n    'charter.net', 'shaw.ca'],\n\n  defaultSecondLevelDomains: [\"yahoo\", \"hotmail\", \"mail\", \"live\", \"outlook\", \"gmx\"],\n\n  defaultTopLevelDomains: [\"com\", \"com.au\", \"com.tw\", \"ca\", \"co.nz\", \"co.uk\", \"de\",\n    \"fr\", \"it\", \"ru\", \"net\", \"org\", \"edu\", \"gov\", \"jp\", \"nl\", \"kr\", \"se\", \"eu\",\n    \"ie\", \"co.il\", \"us\", \"at\", \"be\", \"dk\", \"hk\", \"es\", \"gr\", \"ch\", \"no\", \"cz\",\n    \"in\", \"net\", \"net.au\", \"info\", \"biz\", \"mil\", \"co.jp\", \"sg\", \"hu\"],\n\n  run: function(opts) {\n    opts.domains = opts.domains || Mailcheck.defaultDomains;\n    opts.secondLevelDomains = opts.secondLevelDomains || Mailcheck.defaultSecondLevelDomains;\n    opts.topLevelDomains = opts.topLevelDomains || Mailcheck.defaultTopLevelDomains;\n    opts.distanceFunction = opts.distanceFunction || Mailcheck.sift3Distance;\n\n    var defaultCallback = function(result){ return result };\n    var suggestedCallback = opts.suggested || defaultCallback;\n    var emptyCallback = opts.empty || defaultCallback;\n\n    var result = Mailcheck.suggest(Mailcheck.encodeEmail(opts.email), opts.domains, opts.secondLevelDomains, opts.topLevelDomains, opts.distanceFunction);\n\n    return result ? suggestedCallback(result) : emptyCallback()\n  },\n\n  suggest: function(email, domains, secondLevelDomains, topLevelDomains, distanceFunction) {\n    email = email.toLowerCase();\n\n    var emailParts = this.splitEmail(email);\n\n    if (secondLevelDomains && topLevelDomains) {\n        // If the email is a valid 2nd-level + top-level, do not suggest anything.\n        if (secondLevelDomains.indexOf(emailParts.secondLevelDomain) !== -1 && topLevelDomains.indexOf(emailParts.topLevelDomain) !== -1) {\n            return false;\n        }\n    }\n\n    var closestDomain = this.findClosestDomain(emailParts.domain, domains, distanceFunction, this.domainThreshold);\n\n    if (closestDomain) {\n      if (closestDomain == emailParts.domain) {\n        // The email address exactly matches one of the supplied domains; do not return a suggestion.\n        return false;\n      } else {\n        // The email address closely matches one of the supplied domains; return a suggestion\n        return { address: emailParts.address, domain: closestDomain, full: emailParts.address + \"@\" + closestDomain };\n      }\n    }\n\n    // The email address does not closely match one of the supplied domains\n    var closestSecondLevelDomain = this.findClosestDomain(emailParts.secondLevelDomain, secondLevelDomains, distanceFunction, this.secondLevelThreshold);\n    var closestTopLevelDomain    = this.findClosestDomain(emailParts.topLevelDomain, topLevelDomains, distanceFunction, this.topLevelThreshold);\n\n    if (emailParts.domain) {\n      var closestDomain = emailParts.domain;\n      var rtrn = false;\n\n      if(closestSecondLevelDomain && closestSecondLevelDomain != emailParts.secondLevelDomain) {\n        // The email address may have a mispelled second-level domain; return a suggestion\n        closestDomain = closestDomain.replace(emailParts.secondLevelDomain, closestSecondLevelDomain);\n        rtrn = true;\n      }\n\n      if(closestTopLevelDomain && closestTopLevelDomain != emailParts.topLevelDomain) {\n        // The email address may have a mispelled top-level domain; return a suggestion\n        closestDomain = closestDomain.replace(emailParts.topLevelDomain, closestTopLevelDomain);\n        rtrn = true;\n      }\n\n      if (rtrn == true) {\n        return { address: emailParts.address, domain: closestDomain, full: emailParts.address + \"@\" + closestDomain };\n      }\n    }\n\n    /* The email address exactly matches one of the supplied domains, does not closely\n     * match any domain and does not appear to simply have a mispelled top-level domain,\n     * or is an invalid email address; do not return a suggestion.\n     */\n    return false;\n  },\n\n  findClosestDomain: function(domain, domains, distanceFunction, threshold) {\n    threshold = threshold || this.topLevelThreshold;\n    var dist;\n    var minDist = 99;\n    var closestDomain = null;\n\n    if (!domain || !domains) {\n      return false;\n    }\n    if(!distanceFunction) {\n      distanceFunction = this.sift3Distance;\n    }\n\n    for (var i = 0; i < domains.length; i++) {\n      if (domain === domains[i]) {\n        return domain;\n      }\n      dist = distanceFunction(domain, domains[i]);\n      if (dist < minDist) {\n        minDist = dist;\n        closestDomain = domains[i];\n      }\n    }\n\n    if (minDist <= threshold && closestDomain !== null) {\n      return closestDomain;\n    } else {\n      return false;\n    }\n  },\n\n  sift3Distance: function(s1, s2) {\n    // sift3: http://siderite.blogspot.com/2007/04/super-fast-and-accurate-string-distance.html\n    if (s1 == null || s1.length === 0) {\n      if (s2 == null || s2.length === 0) {\n        return 0;\n      } else {\n        return s2.length;\n      }\n    }\n\n    if (s2 == null || s2.length === 0) {\n      return s1.length;\n    }\n\n    var c = 0;\n    var offset1 = 0;\n    var offset2 = 0;\n    var lcs = 0;\n    var maxOffset = 5;\n\n    while ((c + offset1 < s1.length) && (c + offset2 < s2.length)) {\n      if (s1.charAt(c + offset1) == s2.charAt(c + offset2)) {\n        lcs++;\n      } else {\n        offset1 = 0;\n        offset2 = 0;\n        for (var i = 0; i < maxOffset; i++) {\n          if ((c + i < s1.length) && (s1.charAt(c + i) == s2.charAt(c))) {\n            offset1 = i;\n            break;\n          }\n          if ((c + i < s2.length) && (s1.charAt(c) == s2.charAt(c + i))) {\n            offset2 = i;\n            break;\n          }\n        }\n      }\n      c++;\n    }\n    return (s1.length + s2.length) /2 - lcs;\n  },\n\n  splitEmail: function(email) {\n    var parts = email.trim().split('@');\n\n    if (parts.length < 2) {\n      return false;\n    }\n\n    for (var i = 0; i < parts.length; i++) {\n      if (parts[i] === '') {\n        return false;\n      }\n    }\n\n    var domain = parts.pop();\n    var domainParts = domain.split('.');\n    var sld = '';\n    var tld = '';\n\n    if (domainParts.length == 0) {\n      // The address does not have a top-level domain\n      return false;\n    } else if (domainParts.length == 1) {\n      // The address has only a top-level domain (valid under RFC)\n      tld = domainParts[0];\n    } else {\n      // The address has a domain and a top-level domain\n      sld = domainParts[0];\n      for (var i = 1; i < domainParts.length; i++) {\n        tld += domainParts[i] + '.';\n      }\n      tld = tld.substring(0, tld.length - 1);\n    }\n\n    return {\n      topLevelDomain: tld,\n      secondLevelDomain: sld,\n      domain: domain,\n      address: parts.join('@')\n    }\n  },\n\n  // Encode the email address to prevent XSS but leave in valid\n  // characters, following this official spec:\n  // http://en.wikipedia.org/wiki/Email_address#Syntax\n  encodeEmail: function(email) {\n    var result = encodeURI(email);\n    result = result.replace('%20', ' ').replace('%25', '%').replace('%5E', '^')\n                   .replace('%60', '`').replace('%7B', '{').replace('%7C', '|')\n                   .replace('%7D', '}');\n    return result;\n  }\n};\n\n// Export the mailcheck object if we're in a CommonJS env (e.g. Node).\n// Modeled off of Underscore.js.\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports = Mailcheck;\n}\n\n// Support AMD style definitions\n// Based on jQuery (see http://stackoverflow.com/a/17954882/1322410)\nif (typeof define === \"function\" && define.amd) {\n  define(\"mailcheck\", [], function() {\n    return Mailcheck;\n  });\n}\n\nif (typeof window !== 'undefined' && window.jQuery) {\n  (function($){\n    $.fn.mailcheck = function(opts) {\n      var self = this;\n      if (opts.suggested) {\n        var oldSuggested = opts.suggested;\n        opts.suggested = function(result) {\n          oldSuggested(self, result);\n        };\n      }\n\n      if (opts.empty) {\n        var oldEmpty = opts.empty;\n        opts.empty = function() {\n          oldEmpty.call(null, self);\n        };\n      }\n\n      opts.email = this.val();\n      Mailcheck.run(opts);\n    }\n  })(jQuery);\n}\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","const {$} = window\r\n\r\n$.validator.messages.required = \"必填欄位\";\r\n\r\n$.validator.addMethod('validate-name',\r\n\t(value, element) => {\r\n\t\treturn new RegExp(/^[\\u4e00-\\u9fa5_a-zA-Z_ ]{1,40}$/i).test(value);\r\n\t},\r\n\t'姓氏格式不正確，請不要輸入數字或符號'\r\n);\r\n\r\n//override email with django email validator regex - fringe cases: \"user@admin.state.in..us\" or \"name@website.a\"\r\n$.validator.addMethod('email',\r\n\t(value, element) => {\r\n\t\tif (value) {\r\n\t\t\treturn /^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/i.test(value);\r\n\t\t}\r\n\r\n\t\treturn true\r\n\t},\r\n\t'Email 格式錯誤'\r\n);\r\n\r\n$.validator.addMethod( \"taiwan-phone\",\r\n\t(value, element) => {\r\n\t\tconst phoneReg6 = new RegExp(/^(0|886|\\+886)?(9\\d{8})$/).test(value);\r\n\t\tconst phoneReg7 = new RegExp(/^(0|886|\\+886){1}[2-8]-?\\d{6,8}$/).test(value);\r\n\r\n\t\tif (value) {\r\n\t\t\treturn (phoneReg6 || phoneReg7)\r\n\t\t}\r\n\t\treturn true\r\n\t},\r\n\t\"電話格式不正確，請只輸入數字 0912345678 和 02-23612351\"\r\n)\r\n\r\n$.validator.addClassRules({ // connect it to a css class\r\n\t\"email\": {email: true},\r\n\t\"taiwan-phone\" : { \"taiwan-phone\" : true }\r\n});\r\n\r\n/**\r\n * Collect all the input values inside the form\r\n * @param  {DOM or string} form Native js Element (not in jquery form)\r\n * @return {Object} {name:value, ...}\r\n */\r\nexport const fetchFormInputs = (form) => {\r\n\tif (typeof form === 'string' || form instanceof String) {\r\n\t\tform = document.querySelector(form)\r\n\t}\r\n\r\n\tlet obj = {}\r\n\tform.querySelectorAll(\"input\").forEach(function (el, idx) {\r\n\t  let v = null\r\n\r\n\t  if (el.type===\"checkbox\") {\r\n\t    v = el.checked\r\n\t  } else {\r\n\t    v = el.value\r\n\t  }\r\n\r\n\t  obj[el.name] = v\r\n\t})\r\n\tform.querySelectorAll(\"select\").forEach(function (el, idx) {\r\n\t\tobj[el.name] = el.options[el.selectedIndex].value\r\n\t})\r\n\r\n\treturn obj\r\n}\r\n\r\n/**\r\n * Retrieve the form POST URL\r\n * @return {string} URL\r\n */\r\nexport const getPostURL = () => {\r\n\treturn document.querySelector(\"#mc-form\").action\r\n}\r\n\r\n/**\r\n * Retrieve the current number of supporters and signup targets\r\n * @return {object} {numSignup:int, numSignupTarget:int}\r\n */\r\nexport const getNumSignupsAndTarget = () => {\r\n\tvar numSignupTarget = document.querySelector('input[name=\"numSignupTarget\"]') ? parseInt(document.querySelector('input[name=\"numSignupTarget\"]').value, 10) : 50000;\r\n\tvar numResponses = document.querySelector('input[name=\"numResponses\"]') ? parseInt(document.querySelector('input[name=\"numResponses\"]').value, 10) : 29612;\r\n\t//console.log('numSignupTarget1:',numSignupTarget);\r\n\tif (numResponses < 29612)\r\n\t\tnumResponses += 29612;\r\n\tif (isNaN(numSignupTarget) || numSignupTarget < 50000)\r\n\t\tnumSignupTarget = 50000;\r\n\t\t//console.log('numSignupTarget2:',numSignupTarget);\r\n    if (numResponses > numSignupTarget)\r\n\t\tnumSignupTarget = Math.ceil(numResponses / 10000) * 10000;\r\n\t\t//console.log('numSignupTarget3:',numSignupTarget);\r\n\treturn {\r\n\t\tnumSignupTarget,\r\n\t\tnumSignup: numResponses\r\n\t}\r\n}\r\n\r\n/**\r\n * Display the full loading screen\r\n *\r\n * Remember to add the following style to your page:\r\n */\r\n/*\r\n\r\n#page-loading {\r\n    position: fixed;\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    background-color: rgba(0,0,0,0.8);\r\n    z-index: 10001;\r\n\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n\r\n    opacity: 1;\r\n    transition: opacity 1s;\r\n}\r\n#page-loading.hide {\r\n    opacity: 0;\r\n    transition: opacity 1s;\r\n}\r\n\r\n#page-loading .lds-ellipsis {\r\n    display: inline-block;\r\n    position: relative;\r\n    width: 80px;\r\n    height: 80px;\r\n}\r\n#page-loading .lds-ellipsis div {\r\n    position: absolute;\r\n    top: 33px;\r\n    width: 13px;\r\n    height: 13px;\r\n    border-radius: 50%;\r\n    background: #6c0;\r\n    animation-timing-function: cubic-bezier(0, 1, 1, 0);\r\n}\r\n#page-loading .lds-ellipsis div:nth-child(1) {\r\n    left: 8px;\r\n    animation: lds-ellipsis1 0.6s infinite;\r\n}\r\n#page-loading .lds-ellipsis div:nth-child(2) {\r\n    left: 8px;\r\n    animation: lds-ellipsis2 0.6s infinite;\r\n}\r\n#page-loading .lds-ellipsis div:nth-child(3) {\r\n    left: 32px;\r\n    animation: lds-ellipsis2 0.6s infinite;\r\n}\r\n#page-loading .lds-ellipsis div:nth-child(4) {\r\n    left: 56px;\r\n    animation: lds-ellipsis3 0.6s infinite;\r\n}\r\n@keyframes lds-ellipsis1 {\r\n    0% {transform: scale(0); }\r\n    100% {transform: scale(1); }\r\n}\r\n@keyframes lds-ellipsis3 {\r\n    0% {transform: scale(1); }\r\n    100% {transform: scale(0); }\r\n}\r\n@keyframes lds-ellipsis2 {\r\n    0% {transform: translate(0, 0); }\r\n    100% {transform: translate(24px, 0); }\r\n}\r\n */\r\nexport const showFullPageLoading = () => {\r\n\tif ( !document.querySelector(\"#page-loading\")) {\r\n\t\tdocument.querySelector(\"body\").insertAdjacentHTML('beforeend', `\r\n\t\t\t<div id=\"page-loading\" class=\"hide\">\r\n\t\t\t  <div class=\"lds-ellipsis\"><div></div><div></div><div></div><div></div></div>\r\n\t\t\t</div>`);\r\n\t}\r\n\r\n\tsetTimeout(() => { // to enable the transition\r\n\t\tdocument.querySelector(\"#page-loading\").classList.remove(\"hide\")\r\n\t}, 0)\r\n}\r\n\r\n/**\r\n * Hide the full page loading\r\n */\r\nexport const hideFullPageLoading = () => {\r\n\tdocument.querySelector(\"#page-loading\").classList.add(\"hide\")\r\n\r\n\tsetTimeout(() => {\r\n\t\tdocument.querySelector(\"#page-loading\").remove()\r\n\t}, 1100)\r\n}\r\n\r\n/**\r\n * Send the tracking event to the ga\r\n * @param  {string} eventLabel The ga trakcing name, normally it will be the short campaign name. ex 2019-plastic_retailer\r\n * @param  {[type]} eventValue Could be empty\r\n * @return {[type]}            [description]\r\n */\r\nexport const sendPetitionTracking = (eventLabel, eventValue) => {\r\n\twindow.dataLayer = window.dataLayer || [];\r\n\r\n\twindow.dataLayer.push({\r\n\t    'event': 'gaEvent',\r\n\t    'eventCategory': 'petitions',\r\n\t    'eventAction': 'signup',\r\n\t    'eventLabel': eventLabel,\r\n\t    'eventValue' : eventValue\r\n\t});\r\n\r\n\twindow.dataLayer.push({\r\n\t    'event': 'fbqEvent',\r\n\t    'contentName': eventLabel,\r\n\t    'contentCategory': 'Petition Signup'\r\n\t});\r\n}\r\n\r\n/**\r\n * We provide two helper class to quickly switch the block show/hide\r\n * in the dd page: `is-hidden-at-dd-page-only`, `is-shown-at-dd-page-only`\r\n *\r\n * This function use the current url to distinguish the dd page.\r\n * The dd page should have url like this: xxx?utm_source=dd\r\n */\r\n(() => {\r\n\tif (window.location.href.indexOf(\"utm_source=dd\")>=0) {\r\n\t\tlet style = document.createElement('style');\r\n\t\tstyle.innerHTML =\r\n\t\t\t`.is-hidden-at-dd-page-only {\r\n\t\t\t\tdisplay: none !important;\r\n\t\t\t}\r\n\t\t\t.is-shown-at-dd-page-only {\r\n\t\t\t\tdisplay: block !important;\r\n\t\t\t}`\r\n\t\t;\r\n\t\tdocument.head.appendChild(style);\r\n\t} else { // not in the dd page\r\n\t\tlet style = document.createElement('style');\r\n\t\tstyle.innerHTML =\r\n\t\t\t`\r\n\t\t\t.is-shown-at-dd-page-only {\r\n\t\t\t\tdisplay: none !important;\r\n\t\t\t}`\r\n\t\t;\r\n\t\tdocument.head.appendChild(style);\r\n\t}\r\n})()\r\n","import './main.scss'\r\nimport {\r\n\tfetchFormInputs,\r\n\tgetPostURL,\r\n\tgetNumSignupsAndTarget,\r\n\tshowFullPageLoading,\r\n\thideFullPageLoading,\r\n\tsendPetitionTracking } from './jquery.mc.form-helper.js'\r\n\r\nconst {$, history, AOS} = window\r\n\r\nvar input = $('.typing__input').val();\r\nvar counter = 0;\r\nvar freq = 100;\r\nvar timer = null;\r\n\r\n// display the typing effect\r\nvar typing = () => {\r\n\tlet current_input = input.substr(0, counter);\r\n\tlet last = current_input.substr(current_input.length - 1);\r\n\tif (last == '，' || last == '？' || last == '。') {\r\n\t\tfreq = 500;\r\n\t} else\r\n\t\tfreq = 100;\r\n\t$('.typing__output').html(current_input);\r\n\tcounter++;\r\n\tif (counter === input.length + 1) {\r\n\t\tclearInterval(timer);\r\n\t} else {\r\n\t\ttimer = setTimeout(typing, freq);\r\n\t}\r\n}\r\n\r\n$(document).ready(function() {\r\n\tAOS.init({\r\n\t\teasing: 'ease-out-back',\r\n\t\tduration: 1000,\r\n\t});\r\n\r\n\t$('.typing__output').html('');\r\n\r\n\tvar input_hide = false;\r\n\tif (document.body.clientWidth > 800) {\r\n\t\t$('#fullpage').fullpage({\r\n\t\t\tverticalCentered: false,\r\n\t\t\tscrollBar: true,\r\n\t\t\tnavigation: false,\r\n\t\t\tafterRender: function() {},\r\n\t\t});\r\n\t\tinput_hide = true;\r\n\r\n\t\tif ($(\"#page-1\").is(\":visible\"))\r\n\t\t\ttimer = setTimeout(typing, freq);\r\n\t\telse {\r\n\t\t\t$('.typing__output').html(input);\r\n\t\t}\r\n\t} else {\r\n\t\t$('.typing__output').html(input);\r\n\t}\r\n\r\n\t$(\".floating-signup-div\").click(function() {\r\n\t\t$('html, body').animate({ scrollTop: $(\".main-form-container\").offset().top }, 'slow');\r\n\t\t$('#email').focus();\r\n\t});\r\n\r\n\t$(\".downward-div\").click(function() {\r\n\t\t$.fn.fullpage.moveSectionDown();\r\n\t});\r\n});\r\n\r\n// swap images to make it looks an animation\r\n$(() => {\r\n\tsetInterval(() => {\r\n\t\t$(\".before-after img\").toggleClass(\"active\");\r\n\t}, 1000)\r\n})\r\n\r\n\r\n// handle form inilialize\r\n$(() => {\r\n\t// Generate the year selections\r\n\tlet nowYear = new Date().getFullYear()\r\n\tfor (var i = nowYear; i > nowYear-100; i--) {\r\n\t\t$('.en__field__input--select').append($('<option>', {\r\n\t\t\tvalue: i.toString()+\"-01-01\",\r\n\t\t\ttext: i\r\n\t\t}));\r\n\t}\r\n\r\n\t// expand the hidden fields while focus to email inputs\r\n\t$('#email').focus(function() {\r\n\t\t$('.slide-down-panel').slideDown(400);\r\n\t});\r\n\r\n\t$('.en__submit').click(function() {\r\n\t\t$('.slide-down-panel').slideDown(400);\r\n\t});\r\n\r\n\t$('.cta__btn').click(function() {\r\n\t\t$('.slide-down-panel').slideDown(400);\r\n\t\t$('html, body').animate({ scrollTop: $('#email').offset().top }, 'slow');\r\n\t\t$('#email').focus();\r\n\t});\r\n\r\n\t// initialize the validations\r\n\r\n\r\n\t$(\"form.en__component\").validate({\r\n\t\terrorPlacement: function(error, element) {\r\n\t\t\tconsole.log(error)\r\n\t\t\t// element.parents(\"div.form-field:first\").after( error );\r\n\t\t\telement.after( error );\r\n\t\t},\r\n\t\tsubmitHandler: function(form) {\r\n\t\t\tshowFullPageLoading()\r\n\r\n\t\t\ttry {\r\n\t\t\t\tlet defaults = fetchFormInputs(\"#mc-form\")\r\n\t\t\t\tlet userInputs = fetchFormInputs(form)\r\n\t\t\t\tlet postData = Object.assign(defaults, userInputs)\r\n\r\n\t\t\t\t// post-process values\r\n\t\t\t\tif (postData.MobilePhone) {\r\n\t\t\t\t\tpostData.MobilePhone = postData.MobilePhone.replace(/^0{1}/, '')\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfetch(getPostURL(), {\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tbody: Object.keys(postData).reduce((formData, k) => {\r\n\t\t\t\t\t\tformData.append(k, postData[k]);\r\n\t\t\t\t\t\treturn formData;\r\n\t\t\t\t\t}, new FormData())\r\n\t\t\t\t})\r\n\t\t\t\t.then(response => response.json())\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\t//console.log('response', response)\r\n\r\n\t\t\t\t\thideFullPageLoading()\r\n\t\t\t\t\tchangeToPage(2)\r\n\r\n\t\t\t\t\tif (response.Supporter) { // ok, go to next page\r\n\t\t\t\t\t\tsendPetitionTracking(\"2020-ocean_sanctuaries_tao\")\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => {\r\n\t\t\t\t\thideFullPageLoading()\t// something wrong\r\n\t\t\t\t\t//alert(error)\r\n\t\t\t\t\tconsole.error(error)\r\n\t\t\t\t})\r\n\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(e)\r\n\t\t\t}\r\n\r\n\t\t\treturn false\r\n\t\t},\r\n\t\tinvalidHandler: function(event, validator) {\r\n\t\t\t// 'this' refers to the form\r\n\t\t\tvar errors = validator.numberOfInvalids();\r\n\t\t\tif (errors) {\r\n\t\t\t\tconsole.log(errors)\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t//email suggestion, email correctness\r\n\tlet domains = [\r\n\t\t\"me.com\",\r\n\t\t\"outlook.com\",\r\n\t\t\"netvigator.com\",\r\n\t\t\"cloud.com\",\r\n\t\t\"live.hk\",\r\n\t\t\"msn.com\",\r\n\t\t\"gmail.com\",\r\n\t\t\"hotmail.com\",\r\n\t\t\"ymail.com\",\r\n\t\t\"yahoo.com\",\r\n\t\t\"yahoo.com.tw\",\r\n\t\t\"yahoo.com.hk\"\r\n\t];\r\n\tlet topLevelDomains = [\"com\", \"net\", \"org\"];\r\n\r\n\tvar Mailcheck = require('mailcheck');\r\n\t\r\n\t$(\"#email\").on('blur', function() {\r\n\t\tMailcheck.run({\r\n\t\t\temail: $(\"#email\").val(),\r\n\t\t\tdomains: domains, // optional\r\n\t\t\ttopLevelDomains: topLevelDomains, // optional\r\n\t\t\tsuggested: (suggestion) => {\r\n\t\t\t\t$('#emailSuggestion')[0].innerHTML = suggestion.full;\r\n\t\t\t\t$('.email-suggestion').show();\r\n\t\t\t},\r\n\t\t\tempty: () => {\r\n\t\t\t\tthis.emailSuggestion = null\r\n\t\t\t}\r\n\t\t});\t\t\r\n\t});\r\n\t$(\".email-suggestion\").click(function() {\r\n\t\t$(\"#email\").val($('#emailSuggestion')[0].innerHTML);\r\n\t\t$('.email-suggestion').hide();\r\n\t});\r\n\r\n\thideDdBtn();\r\n})\r\n\r\n// activate the share block\r\n$(() => {\r\n\tvar el = document.querySelector(\".en-share-block\"),\r\n\t\turl = el.getAttribute(\"data-url\"),\r\n\t\ttext = el.getAttribute(\"data-text\")\r\n\r\n\tif ( !url) {\r\n\t\tconsole.log(\"Cannot find the url. Exit share_block\")\r\n\t}\r\n\r\n\tvar mainButton = el.querySelector(\".main-share-button\")\r\n\tvar shareUrls = {}\r\n\tshareUrls.fb = \"https://www.facebook.com/sharer/sharer.php?u=\"+encodeURIComponent(url)+\"&t=\"+encodeURIComponent(text)\r\n\tshareUrls.line = \"https://line.naver.jp/R/msg/text/?\"\r\n\t\t+ encodeURIComponent(text) + \"%0D%0A\"\r\n\t\t+ encodeURIComponent(url)\r\n\r\n\tif (navigator.share) {\r\n\t\tfunction handleClickMainShare(e) {\r\n\t\t\tnavigator.share({\r\n\t\t\t  text: text,\r\n\t\t\t  url: url\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tmainButton.addEventListener('click', handleClickMainShare);\r\n\t\tmainButton.addEventListener('touchstart', handleClickMainShare);\r\n\t} else {\r\n\t\tmainButton.href = shareUrls.fb\r\n\t}\r\n\r\n\t// setup urls for buttons\r\n\tfor (var name in shareUrls) {\r\n\t\tvar theBtn = el.querySelector(\".\"+name)\r\n\t\tif (theBtn) {\r\n\t\t\ttheBtn.href = shareUrls[name]\r\n\t\t}\r\n\t}\r\n\r\n})\r\n\r\n// animate the progress bar\r\n$(() => {\r\n\tlet {numSignupTarget, numSignup} = getNumSignupsAndTarget()\r\n\r\n\t$(\".signup-target\").text(numSignupTarget.toLocaleString())\r\n\t$(\".signup-current\").text(numSignup.toLocaleString())\r\n\r\n\tlet animateMilliSec = 1200\r\n\tlet $signupCurrEl = $(\".signup-current\")\r\n\r\n  $signupCurrEl.prop('Counter',0).animate({\r\n\t\tCounter: numSignup\r\n  }, {\r\n    duration: animateMilliSec,\r\n    easing: 'swing',\r\n    step: function (now) {\r\n\t\t\t$signupCurrEl.text(Math.ceil(now).toLocaleString());\r\n    }\r\n  });\r\n\r\n\t$(\".meter > span\").each(function() {\r\n\t\t$(this)\r\n\t\t\t.data(\"origWidth\", $(this).width())\r\n\t\t\t.width(0)\r\n\t\t\t.animate({\r\n\t\t\t\twidth: \"\"+Math.ceil(numSignup/numSignupTarget*100)+\"%\"\r\n\t\t\t}, animateMilliSec);\r\n\t});\r\n})\r\n\r\n// handle page changes\r\nconst changeToPage = (pageNo) => {\r\n\t//console.log('changeToPage', pageNo)\r\n\tif (pageNo===1) {\r\n\t\t$(\"#page-2\").hide()\r\n\t} else if (pageNo==2) {\r\n\t\t$(\"#page-1\").hide()\r\n\t\t$(\"#page-2\").show()\r\n\r\n\t\t// scroll to the succ element\r\n\t\tif ($(window).width() <= 800) {\r\n\t\t\tlet enc = document.querySelector(\"#page-2\")\r\n\t\t\tlet top = enc.getBoundingClientRect().top+window.pageYOffset\r\n\t\t\t//window.scrollTo(0, top);\r\n\t\t}\r\n\r\n\t\tdocument.querySelector(\".floating-signup-div\").remove()\r\n\r\n\t} else {\r\n\t\tthrow new Error(\"Unknow pageNo: \"+pageNo)\r\n\t}\r\n}\r\n\r\n/**\r\n * Hide the donatin btn in DD page\r\n */\r\nconst hideDdBtn = () => {\r\n\tconst queryString = window.location.search;\r\n\tconst urlParams = new URLSearchParams(queryString);\r\n\tif (urlParams.get('utm_source') === \"dd\") {\r\n\t\t$('.is-hidden-at-dd-page-only').hide();\r\n\r\n\t\t$('#en__field_supporter_phoneNumber').removeAttr(\"required\"); //移除電話欄位 required Attr\t\t\r\n\t}\r\n}\r\n\r\n// init\r\n$(() => {\r\n\tchangeToPage(1)\r\n})"],"sourceRoot":""}